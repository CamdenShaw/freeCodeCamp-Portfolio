"use strict";var google=window.google;$(document).ready(function(){var g=[[{lat:49.257162147031,lng:-123.14618110657},{lat:49.266320353131,lng:-123.14570903778},{lat:49.265900289126,lng:-123.11493873596}],[{lat:49.257022100106,lng:-123.13158988953},{lat:49.256882052783,lng:-123.11511039734},{lat:49.257946402467,lng:-123.13326358795}]],t=[],e=[{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]}];var n=new google.maps.Map(document.getElementById("map"),{center:{lat:49.256994090673,lng:-123.13892841339},zoom:14,styles:e,disableDefaultUI:!0,zoomControl:!0}),o=document.getElementById("pac-input"),l=new google.maps.places.SearchBox(o);function a(){0===(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).length?(g.forEach(function(e){t.push(new google.maps.Polygon({map:n,paths:e,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,geodesic:!0,editable:!0}))}),t.forEach(function(a,i){a.addListener("dragend",function(){for(var e=a.getPath(),t=[],n=e.getLength(),o=0;o<n;o++){var l=e.getAt(o).toUrlValue(11).split(",");t.push({lat:l[0],lng:l[1]})}console.log(t,"drag end success"),g[i]=t,console.log(i,g),s(!0)})})):t[t.length-1].setPaths(g[g.length-1])}function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g[g.length-1].push(e)}function s(){var l=0<arguments.length&&void 0!==arguments[0]&&arguments[0],a=0;l&&(document.getElementById("coordinates-box").innerHTML=""),g.forEach(function(e){a++;var t="";if(document.getElementById("coordinates-box").childElementCount<g.length||l)e.forEach(function(e){t+="<p>"+e.lat+", "+e.lng+"</p>"}),document.getElementById("coordinates-box").innerHTML+='\n                    <div class="polygon-'+a+'-coordinates">\n                        <h6 class="title coordinates">Polygon '+a+"</h6>\n                        "+t+"\n                    </div>";else if(a===g.length){var n=e[e.length-1].lat,o=e[e.length-1].lng;document.querySelector("#coordinates-box .polygon-"+a+"-coordinates").innerHTML+="<p>"+n+", "+o+"</p>"}})}n.addListener("bounds_changed",function(){l.setBounds(n.getBounds())}),l.addListener("places_changed",function(){var e=l.getPlaces();if(0!==e.length){var t=new google.maps.LatLngBounds;e.forEach(function(e){e.geometry?e.geometry.viewport?t.union(e.geometry.viewport):t.extend(e.geometry.location):console.log("Returned place contains no geometry")}),n.fitBounds(t)}}),console.log(g),i({lat:49.25797441136,lng:-123.13682556152}),a(),s(),n.addListener("click",function(e){i({lat:e.latLng.lat(),lng:e.latLng.lng()}),a([g]),s()})});